<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>test XDomain</title>
</head>
<body>
    <h3>this page from :<span id="host"></span></h3>
    <input type="text" value="" id="data" /><button id="btn" onclick="send();">提交</button>
    <div id="info"></div>
    <script type="text/javascript" src="../mix-0.2.js" name="$" debug="true"></script>
    <script type="text/javascript" src="../Deferred.js" name="$" debug="true"></script>
    <script type="text/javascript" src="../XDomain.js" name="$" debug="true"></script>


    <script type="text/javascript">
    document.getElementById('host').innerHTML = location.host;
    var h = location.href;
    $.config({path:h});
    $.XDomain.init({node:window.parent, origin: '*'}).add(function(a){
        document.getElementById('info').innerHTML += '<br>'+'time '+(new Date)+' 收到消息：'+a;
    });
    function send(){
        var val = document.getElementById('data').value;
        $.XDomain.send(val);
    }

    
    </script>
</body>
</html>
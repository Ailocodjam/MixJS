<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>test XDomain</title>
</head>
<body>
    <h1>test Widget</h1>
    <script type="text/javascript" src="../mix-0.2.js" name="$" debug="true"></script>
    <script type="text/javascript" src="../Deferred.js" name="$" debug="true"></script>
    <script type="text/javascript" src="../XDomain.js" name="$" debug="true"></script>
    <div style="width:100%;border:1px solid green;">
        <h3>this page from :<span id="host"></span></h3>
        <input type="text" value="" id="data" /><button id="btn" onclick="send();">提交</button>
        <div id="info"></div>
    </div>
    <iframe id="iframeA" src="http://demo2.com/github/MixJS0.2/test-0.2/xdomain-client.html" style="border:1px solid #ff6600;width:100%;height:300px;"></iframe>

    <script type="text/javascript">
    document.getElementById('host').innerHTML = location.host;
    var h = location.href;
    $.config({path:h});
    $.XDomain.init({node:document.getElementById('iframeA').contentWindow, origin: '*'}).add(function(a){
        document.getElementById('info').innerHTML += '<br>'+'time '+(new Date)+' 收到消息：'+a;
    });
    function send(){
        var val = document.getElementById('data').value;
        $.XDomain.send(val);
    }

    
    </script>
</body>
</html>